<main class="carrito">

  <h1 class="carrito__title">Carrito</h1>

  <div *ngIf="isLoading()" class="carrito__loading">
    Cargando...
  </div>

  <section *ngIf="!isLoading() && detalles().length > 0" class="carrito__content">

    <div class="carrito-header-row">
      <span>Producto</span>
      <span>Cantidad</span>
      <span>Precio</span>
      <span>Subtotal</span>
      <span>Acciones</span>
    </div>

    <div *ngFor="let item of detalles()" class="carrito-item-row">

      <div class="carrito-item__product">
        <strong>{{ item.Producto }}</strong> ({{ item.Marca }})  
        <div class="carrito-item__description">
          {{ item.DetalleDescripcion }}
        </div>
      </div>

      <div class="carrito-item__quantity">
        <button (click)="decrementar(item)">-</button>
        {{ item.cantidad }}
        <button (click)="incrementar(item)">+</button>
      </div>

      <div class="carrito-item__price">
        ${{ item.PrecioUnitario | number:'1.2-2' }}
      </div>

      <div class="carrito-item__subtotal">
        ${{ item.subtotal | number:'1.2-2' }}
      </div>

      <div class="carrito-item__actions">
        <button (click)="eliminar(item)">Eliminar</button>
      </div>

    </div>

    <hr class="carrito__divider">

    <h2 class="carrito__total">
      Total: ${{ total | number:'1.2-2' }}
    </h2>

    <!-- Selección de tipo de pago -->
    <div class="carrito__pago">
      <label for="tipoPago">Tipo de pago:</label>
      <select id="tipoPago" [(ngModel)]="tipoPago">
        <option [value]="1">Tarjeta</option>
        <option [value]="2">Efectivo</option>
        <option [value]="3">Transferencia</option>
      </select>
    </div>

    <div class="carrito__buttons">
      <button (click)="finalizarCompra()">Finalizar Compra</button>
      <button (click)="cancelarVenta()">Cancelar Venta</button>
    </div>

  </section>

  <div *ngIf="!isLoading() && detalles().length === 0" class="carrito__empty">
    Tu carrito está vacío.
  </div>

</main>
