<section class="register">
  <div class="register__image">
    <div class="register__image-container">
      <div class="register__text">
        <h2 class="register__title">Bienvenido a Smart Point</h2>
      </div>
    </div>
  </div>

  <div class="register__form">
    <form 
        [formGroup]="registerForm" 
        (ngSubmit)="onSubmit()" 
        class="register__form-container" 
        novalidate
        [class.disabled-form]="loading"
    >

      <p class="register__subtitle">Regístrate para continuar</p>

      <div 
        *ngIf="errorMessage || successMessage" 
        [ngClass]="{
          'error-message': isError,
          'success-message': !isError && successMessage 
        }"
        role="alert"
        class="register__status-message"
      >
        {{ isError ? errorMessage : successMessage }}
      </div>
      
      <div class="register__form-group">
        <div class="register__floating-label">
          <input 
            type="tel"
            formControlName="telefono" 
            class="register__input" 
            id="register-telefono" 
            maxlength="10"
            pattern="[0-9]*"
            [class.invalid]="f['telefono'].invalid && (f['telefono'].dirty || f['telefono'].touched)"
          >
          <label class="register__label" for="register-telefono">Teléfono<strong>*</strong></label>
        </div>
        <small class="register__error" *ngIf="f['telefono'].invalid && (f['telefono'].dirty || f['telefono'].touched)">
          <span *ngIf="f['telefono'].hasError('required')">El teléfono es obligatorio.</span>
          <span *ngIf="f['telefono'].hasError('pattern')">Debe tener **exactamente** 10 dígitos numéricos.</span>
        </small>
      </div>

      <div class="register__form-group">
        <div class="register__floating-label">
          <input 
            type="text" 
            formControlName="nombres" 
            class="register__input" 
            id="register-nombres" 
            [class.invalid]="f['nombres'].invalid && (f['nombres'].dirty || f['nombres'].touched)"
          >
          <label class="register__label" for="register-nombres">Nombres<strong>*</strong></label>
        </div>
        <small class="register__error" *ngIf="f['nombres'].invalid && (f['nombres'].dirty || f['nombres'].touched)">
          <span *ngIf="f['nombres'].hasError('required')">Los nombres son obligatorios.</span>
          <span *ngIf="f['nombres'].hasError('minlength')">
            Deben tener al menos {{ f['nombres'].getError('minlength').requiredLength }} caracteres.
          </span>
        </small>
      </div>

      <div class="register__form-group">
        <div class="register__floating-label">
          <input 
            type="text" 
            formControlName="apellidos" 
            class="register__input" 
            id="register-apellidos" 
            [class.invalid]="f['apellidos'].invalid && (f['apellidos'].dirty || f['apellidos'].touched)"
          >
          <label class="register__label" for="register-apellidos">Apellidos<strong>*</strong></label>
        </div>
        <small class="register__error" *ngIf="f['apellidos'].invalid && (f['apellidos'].dirty || f['apellidos'].touched)">
          <span *ngIf="f['apellidos'].hasError('required')">Los apellidos son obligatorios.</span>
          <span *ngIf="f['apellidos'].hasError('minlength')">
            Deben tener al menos {{ f['apellidos'].getError('minlength').requiredLength }} caracteres.
          </span>
        </small>
      </div>

      <div class="register__form-group">
        <div class="register__floating-label">
          <input 
            type="email" 
            formControlName="email" 
            class="register__input" 
            id="register-email" 
            [class.invalid]="f['email'].invalid && (f['email'].dirty || f['email'].touched)"
          >
          <label class="register__label" for="register-email">Correo Electrónico<strong>*</strong></label>
        </div>
        <small class="register__error" *ngIf="f['email'].invalid && (f['email'].dirty || f['email'].touched)">
          <span *ngIf="f['email'].hasError('required')">El correo es obligatorio.</span>
          <span *ngIf="f['email'].hasError('email')">Ingresa un correo válido.</span>
        </small>
      </div>

      <div class="register__form-group">
        <div class="register__floating-label">
          <input 
            type="password" 
            formControlName="contrasena" 
            class="register__input" 
            id="register-contrasena" 
            [class.invalid]="f['contrasena'].invalid && (f['contrasena'].dirty || f['contrasena'].touched)"
          >
          <label class="register__label" for="register-contrasena">Contraseña<strong>*</strong></label>
        </div>
        <small class="register__error" *ngIf="f['contrasena'].invalid && (f['contrasena'].dirty || f['contrasena'].touched)">
          <span *ngIf="f['contrasena'].hasError('required')">La contraseña es obligatoria.</span>
          <span *ngIf="f['contrasena'].hasError('minlength')">
            Debe tener al menos {{ f['contrasena'].getError('minlength').requiredLength }} caracteres.
          </span>
        </small>
      </div>

      <button type="submit" class="register__button" [disabled]="registerForm.invalid || loading">
        {{ loading ? 'Registrando...' : 'Registrarse' }}
      </button>

      <div class="register__login">
        <a routerLink="/login" class="register__login-link">¿Ya tienes cuenta? Inicia sesión</a>
      </div>

    </form>
  </div>
</section>